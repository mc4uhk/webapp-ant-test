<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="learn-jquery.css" />

    <link
      type="text/css"
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.css"
    />
    <link
      type="text/css"
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid-theme.css"
    />

    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.js"
    ></script>
    <meta charset="UTF-8" />
    <title>CSS Position</title>

    <!-- 
        Reference
        jQuery Crash Course [1] - Intro & Selectors
        https://www.youtube.com/watch?v=3nrLc_JOF7k
     -->
  </head>
  <body>
    <div id="jsGrid"></div>

    <input type="button" onclick="goSave()" value="Save" />
  </body>

  <script>
    //update field if click on Not the cell
    $(function () {
      $("#jsGrid").on("click", (args) => {
        console.log(args.target);
        if (!$(args.target).is("td") && !$(args.target).is("input")) {
          $("#jsGrid").jsGrid("updateItem");
        }
      });
    });

    function goSave() {}

    var isEditing = false;
    var clients = [
      {
        Name: "Otto Clay",
        Age: 25,
        Country: 1,
        Address: "Ap #897-1459 Quam Avenue",
        Married: false,
      },
      {
        Name: "Connor Johnston",
        Age: 45,
        Country: 2,
        Address: "Ap #370-4647 Dis Av.",
        Married: true,
      },
      {
        Name: "Lacey Hess",
        Age: 29,
        Country: 3,
        Address: "Ap #365-8835 Integer St.",
        Married: false,
      },
      {
        Name: "Timothy Henson",
        Age: 56,
        Country: 1,
        Address: "911-5143 Luctus Ave",
        Married: true,
      },
      {
        Name: "Ramona Benton",
        Age: 32,
        Country: 3,
        Address: "Ap #614-689 Vehicula Street",
        Married: false,
      },
    ];

    var countries = [
      { Name: "", Id: 0 },
      { Name: "United States", Id: 1 },
      { Name: "Canada", Id: 2 },
      { Name: "United Kingdom", Id: 3 },
    ];

    $("#jsGrid").jsGrid({
      width: "100%",
      height: "400px",

      editing: true,
      sorting: true,
      paging: true,

      data: clients,

      rowClick: function (args) {
        if (this._editingRow) this.updateItem();

        console.log(this._editingRow);
        console.log(args);
        console.log(args.item.Married);

        if (this.editing) {
          this.editItem($(args.event.target).closest("tr"));
        }
      },

      fields: [
        {
          name: "Name",
          type: "text",
          width: 150,
          validate: "required",
          editing: false,
        },
        { name: "Age", type: "number", width: 50, editing: true },
        { name: "Address", type: "text", width: 200, editing: true },
        {
          name: "Country",
          type: "select",
          items: countries,
          valueField: "Id",
          textField: "Name",
        },
        {
          name: "Married",
          type: "checkbox",
          title: "Is Married",
          sorting: false,
        },
      ],
    });

    function showSelected() {
      // clients.forEach((client, i) => console.log(client.Married ? i : ""));
      console.log(clients.filter((client) => client.Married));
    }
  </script>
</html>
